
> backend@1.0.0 test
> cross-env NODE_ENV=test jest

  console.log
    [dotenv@17.2.3] injecting env (11) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild

      at _log (node_modules/dotenv/lib/main.js:142:11)

  console.log
    [dotenv@17.2.3] injecting env (11) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

  console.log
    ‚úÖ Environment variables validated successfully (DB_DIALECT: postgres)

      at log (middleware/envValidation.js:85:11)

[33mwarn[39m: [VALIDATION] Validation failed for /api/login: {"0":{"field":"body.password","message":"Invalid input: expected string, received undefined"},"service":"shopify-admin-api","timestamp":"2025-11-23T08:23:52.120Z"}
[33mwarn[39m: [LOGIN] User not found: wrong@example.com (normalized: wrong@example.com) {"service":"shopify-admin-api","timestamp":"2025-11-23T08:23:52.160Z"}
[33mwarn[39m: [LOGIN] Password mismatch for: test@example.com {"service":"shopify-admin-api","timestamp":"2025-11-23T08:23:52.180Z"}
PASS tests/authController.test.js
  Auth Controller
    POST /api/login
      ‚àö should return 400 if email or password missing (158 ms)
      ‚àö should return 401 if user not found (19 ms)
      ‚àö should return 401 if password invalid (16 ms)
      ‚àö should return tokens on successful login (20 ms)

  console.log
    ‚úÖ Environment variables validated successfully (DB_DIALECT: postgres)

      at log (middleware/envValidation.js:85:11)

PASS tests/storeController.test.js
  Store Controller
    GET /api/stores
      ‚àö should return all stores (66 ms)
    POST /api/stores
      ‚àö should create a new store (31 ms)

Test Suites: 2 passed, 2 total
Tests:       6 passed, 6 total
Snapshots:   0 total
Time:        4.2 s
Ran all test suites.
Force exiting Jest: Have you considered using `--detectOpenHandles` to detect async operations that kept running after all tests finished?
