
> backend@1.0.0 test
> cross-env NODE_ENV=test jest tests/orderController.test.js

  console.log
    DEBUG: createOrder called

      at log (controllers/orderController.js:351:13)

  console.log
    DEBUG: sequelize is: {
      transaction: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      literal: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      }
    }

      at log (controllers/orderController.js:352:13)

  console.log
    DEBUG ERROR BODY (Create): {}

      at Object.log (tests/orderController.test.js:234:25)

  console.log
    DEBUG: createOrder called

      at log (controllers/orderController.js:351:13)

  console.log
    DEBUG: sequelize is: {
      transaction: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      },
      literal: [Function: mockConstructor] {
        _isMockFunction: true,
        getMockImplementation: [Function (anonymous)],
        mock: [Getter/Setter],
        mockClear: [Function (anonymous)],
        mockReset: [Function (anonymous)],
        mockRestore: [Function (anonymous)],
        mockReturnValueOnce: [Function (anonymous)],
        mockResolvedValueOnce: [Function (anonymous)],
        mockRejectedValueOnce: [Function (anonymous)],
        mockReturnValue: [Function (anonymous)],
        mockResolvedValue: [Function (anonymous)],
        mockRejectedValue: [Function (anonymous)],
        mockImplementationOnce: [Function (anonymous)],
        withImplementation: [Function: bound withImplementation],
        mockImplementation: [Function (anonymous)],
        mockReturnThis: [Function (anonymous)],
        mockName: [Function (anonymous)],
        getMockName: [Function (anonymous)],
        [Symbol(nodejs.dispose)]: [Function (anonymous)]
      }
    }

      at log (controllers/orderController.js:352:13)

  console.log
    DEBUG ERROR BODY (Product Not Found): {}

      at Object.log (tests/orderController.test.js:250:25)

node.exe : FAIL 
tests/orderController.test.js
At C:\Program 
Files\nodejs\npm.ps1:29 
char:3
+   & $NODE_EXE $NPM_CLI_JS 
$args
+   
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo           
   : NotSpecified: (FAIL te  
  sts/orderController.test   
 .js:String) [], RemoteEx    
ception
    + FullyQualifiedErrorId  
   : NativeCommandError
 
  Order Controller
    GET /api/orders
      ΓêÜ should return a 
list of orders (60 ms)
    GET /api/orders/:id
      ΓêÜ should return 
order details if found (19 
ms)
      ΓêÜ should return 404 
if order not found (6 ms)
    POST /api/orders
      ├ù should create a new 
order (92 ms)
      ├ù should return 400 
if product not found (16 ms)
    PUT /api/orders/:id
      ΓêÜ should update an 
order (10 ms)

  ΓùÅ Order Controller ΓÇ║ 
POST /api/orders ΓÇ║ should 
create a new order

    expect(received).toBe(exp
ected) // Object.is equality

    Expected: 201
    Received: 500

    [0m [90m 235 |[39m    
         }
     [90m 236 |[39m
    
[31m[1m>[22m[39m[90m 
237 |[39m             expect
(res[33m.[39mstatusCode)[3
3m.[39mtoBe([35m201[39m)[
33m;[39m
     [90m     |[39m        
                            
[31m[1m^[22m[39m
     [90m 238 |[39m        
     expect(res[33m.[39mbod
y[33m.[39mid)[33m.[39mtoB
e([32m'new-order-id'[39m)[
33m;[39m
     [90m 239 |[39m        
     expect(db[33m.[39m[33
mOrder[39m[33m.[39mcreate)
[33m.[39mtoHaveBeenCalled()
[33m;[39m
     [90m 240 |[39m        
 })[33m;[39m[0m

      at Object.toBe (tests/o
rderController.test.js:237:36
)

  ΓùÅ Order Controller ΓÇ║ 
POST /api/orders ΓÇ║ should 
return 400 if product not 
found

    expect(received).toBe(exp
ected) // Object.is equality

    Expected: 400
    Received: 500

    [0m [90m 251 |[39m    
         }
     [90m 252 |[39m
    
[31m[1m>[22m[39m[90m 
253 |[39m             expect
(res[33m.[39mstatusCode)[3
3m.[39mtoBe([35m400[39m)[
33m;[39m
     [90m     |[39m        
                            
[31m[1m^[22m[39m
     [90m 254 |[39m        
     expect(res[33m.[39mbod
y[33m.[39mmessage)[33m.[3
9mtoContain([32m'Product 
"Unknown" not 
found'[39m)[33m;[39m
     [90m 255 |[39m        
 })[33m;[39m
     [90m 256 |[39m     
})[33m;[39m[0m

      at Object.toBe (tests/o
rderController.test.js:253:36
)

Test Suites: 1 failed, 1 
total
Tests:       2 failed, 4 
passed, 6 total
Snapshots:   0 total
Time:        1.995 s, 
estimated 3 s
Ran all test suites matching 
tests/orderController.test.js
.
Force exiting Jest: Have you 
considered using 
`--detectOpenHandles` to 
detect async operations that 
kept running after all tests 
finished?
